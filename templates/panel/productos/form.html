{% extends 'panel/base_panel.html' %}

{% block title %}{% if object %}Editar{% else %}Nuevo{% endif %} Producto{% endblock %}

{% block panel_content %}
<div class="panel-header">
    <h1 class="panel-title">{% if object %}Editar Producto{% else %}Nuevo Producto{% endif %}</h1>
</div>

<div class="panel-form">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-row">
            <div class="form-group">
                <label for="id_sku">SKU *</label>
                <input type="text" name="sku" id="id_sku" class="form-control" value="{{ form.sku.value|default:'' }}"
                    required>
                {% if form.sku.errors %}
                <span class="form-error">{{ form.sku.errors.0 }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_nombre">Nombre *</label>
                <input type="text" name="nombre" id="id_nombre" class="form-control"
                    value="{{ form.nombre.value|default:'' }}" required>
            </div>
        </div>

        <div class="form-group">
            <label for="id_descripcion">Descripción</label>
            <textarea name="descripcion" id="id_descripcion"
                class="form-control">{{ form.descripcion.value|default:'' }}</textarea>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="id_precio">Precio *</label>
                {{ form.precio }}
            </div>

            <div class="form-group">
                <label for="id_stock">Stock *</label>
                <input type="number" name="stock" id="id_stock" class="form-control"
                    value="{{ form.stock.value|default:'0' }}" required>
            </div>
        </div>

        <div class="form-group">
            <label for="id_categorias">Categorías</label>
            {{ form.categorias }}
        </div>

        <h3 style="margin: 1.5rem 0 1rem; font-size: 1rem; color: var(--color-gray-600);">Filtros Dinámicos</h3>

        <div class="form-row">
            <div class="form-group">
                <label for="id_filtro_1">Filtro 1</label>
                <input type="text" name="filtro_1" id="id_filtro_1" class="form-control"
                    value="{{ form.filtro_1.value|default:'' }}">
            </div>
            <div class="form-group">
                <label for="id_filtro_2">Filtro 2</label>
                <input type="text" name="filtro_2" id="id_filtro_2" class="form-control"
                    value="{{ form.filtro_2.value|default:'' }}">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="id_filtro_3">Filtro 3</label>
                <input type="text" name="filtro_3" id="id_filtro_3" class="form-control"
                    value="{{ form.filtro_3.value|default:'' }}">
            </div>
            <div class="form-group">
                <label for="id_filtro_4">Filtro 4</label>
                <input type="text" name="filtro_4" id="id_filtro_4" class="form-control"
                    value="{{ form.filtro_4.value|default:'' }}">
            </div>
        </div>

        <div class="form-group">
            <label for="id_filtro_5">Filtro 5</label>
            <input type="text" name="filtro_5" id="id_filtro_5" class="form-control"
                value="{{ form.filtro_5.value|default:'' }}">
        </div>

        <div class="form-group">
            <label for="id_imagen">Imagen</label>
            <input type="file" name="imagen" id="id_imagen" class="form-control" accept="image/*">
            {% if object.imagen %}
            <p class="form-text">Actual: {{ object.imagen.name }}</p>
            {% endif %}
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="activo" {% if form.activo.value or not object %}checked{% endif %}>
                Producto activo
            </label>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <a href="{% url 'panel:productos' %}" class="btn btn-outline">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}